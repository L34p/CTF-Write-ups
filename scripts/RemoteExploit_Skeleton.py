from socket import *
from struct import *
import telnetlib
import time
import sys

def recv_until(s, data):
	buf = ""
	while True:
		c = s.recv(1)
		buf += c
		if data in buf:
			break
	return buf

def remote_debug(flag):
    if(flag == True):
        print"[+] Remote debugging mode"
        time.sleep(10)
        raw_input("Dbg is ready?")

host = 'localhost'
port = 7777

s = socket( AF_INET, SOCK_STREAM )
s.connect((host,port))

if len(sys.argv) == 2:
	remote_debug(True)
else:
	remote_debug(False)

# Example
'''
recv_until(s,"Please choose an option.")
s.send("2\n")
'''
# Implement your exploit HERE!



# print "[+] You got a shell!"

try:
        t = telnetlib.Telnet()
        t.sock = s
        t.interact()
        t.close()
except KeyboardInterrupt:
        pass


